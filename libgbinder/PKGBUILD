# Maintainer: Deepak Kumar <notwho53@gmail.com>
pkgbase=libgbinder
pkgname=(
	'libgbinder'
	'libgbinder-dev'
	'libgbinder-tools'
)
pkgver=1.1.42
pkgrel=1
pkgdesc="GLib-style interface to binder"
arch=('aarch64')
url="https://github.com/mer-hybris/libgbinder.git"
license=('BSD-3-Clause')
makedepends=('flex' 'bison' 'glib2-devel' 'libglibutil-dev')
source=("git+${url}")
sha512sums=('SKIP')

build() {
	cd $srcdir/$pkgbase
	make KEEP_SYMBOLS=1 release pkgconfig
}

package_libgbinder() {
	depends=('libglibutil')
	cd $srcdir/$pkgbase
	make install DESTDIR="${pkgdir}"
}

package_libgbinder-dev() {
	depends=('libgbinder' 'libgbinder-dev')
	cd $srcdir/$pkgbase
	make install-dev DESTDIR="${pkgdir}"
}

package_libgbinder-tools() {
	depends=('libgbinder')
	cd $srcdir/$pkgbase/test
	make install DESTDIR="${pkgdir}"
}
